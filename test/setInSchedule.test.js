const { setInSchedule, createResultObject, getCorrectTime } = require('../index');

describe('getCorrectTime', () => {
  const state = {
    getTime: getCorrectTime(7),
    schedule: createResultObject().schedule,
    allowPower: Array(24).fill(2100),
  };

  test('correct Value', () => {
    const expectedScheduleId = {
      '0': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '1': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '2': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '3': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '4': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '5': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '6': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '7': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '8': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '9': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '10': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '11': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '12': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '13': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '14': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '15': [
        '02DDD23A85DADDD71198305330CC386D',
        '1E6276CC231716FE8EE8BC908486D41E',
        '7D9DC84AD110500D284B33C82FE6E85E',
      ],
      '16': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '17': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '18': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '19': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '20': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '21': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '22': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
      '23': ['02DDD23A85DADDD71198305330CC386D', '1E6276CC231716FE8EE8BC908486D41E'],
    };

    setInSchedule({
      device: {
        id: '02DDD23A85DADDD71198305330CC386D',
        name: 'Холодильник',
        power: 50,
        duration: 24,
      },
      time: { from: 0, to: 24 },
      state,
    });

    setInSchedule({
      device: {
        id: '1E6276CC231716FE8EE8BC908486D41E',
        name: 'Термостат',
        power: 50,
        duration: 24,
      },
      time: { from: 0, to: 24 },
      state,
    });

    setInSchedule({
      device: {
        id: '7D9DC84AD110500D284B33C82FE6E85E',
        name: 'Кондиционер',
        power: 850,
        duration: 1,
      },
      time: { from: 15, to: 16 },
      state,
    });

    Object.keys(expectedScheduleId).forEach(key => {
      expectedScheduleId[key].forEach((id, i) => {
        expect(state.schedule[key][i].id === id).toBe(true);
      });
    });
  });
});
